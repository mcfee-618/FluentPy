## 符合Python风格的对象

* 得益于 Python 数据模型，自定义类型的行为可以像内置类型那样自然。实现如此自然的行为，靠的不是继承，而是鸭子类型 （duck typing）：我们只需按照预定行为实现对象所需的方法即可。

* 对象表现形式：每门面向对象的语言至少都有一种获取对象的字符串表示形式的标准方式。Python 提供了两种方式。实现 __repr__ 和 __str__ 特殊方法，为 repr() 和 str() 提供支持。

    * repr()：以便于开发者理解的方式返回对象的字符串表示形式。
    * str()：以便于用户理解的方式返回对象的字符串表示形式。
```    
在 Python 3 中，__repr__ 、__str__ 和 __format__ 都必须返回 Unicode 字符串（str 类型）。
```

* classmethod与staticmethod：staticmethod就是类下面的一个普通方法，classmethod方法的第一个参数永远是cls即当前类对象

* 私有变量：使用两个前导下划线（尾部没有下划线，或者有一个下划线），把属性标记为私有的，不过是违私有，利用_类名__属性名还是可以访问。解释器不会对使用单个下划线的属性名做特殊处理，不过这是很多 Python 程序员严格遵守的约定，他们不会在类外部访问这种属性。

* 使用 __slots__ 类属性节省空间：默认情况下，Python 在各个实例中名为 __dict__ 的字典里存储实例属性。为了使用底层的散列表提升访问速度，字典会消耗大量内存。如果要处理数百万个属性不多的实例，通过 __slots__ 类属性，能节省大量内存
    ``` 
    在类中定义 __slots__ 属性的目的是告诉解释器：这个类中的所有实例属性都在这儿了！
    在类中定义 __slots__ 属性之后，实例不能再有 __slots__ 中所列名称之外的其他属性。
    这样，Python 会在各个实例中使用类似元组的结构存储实例变量，从而避免使用消耗内存的 __dict__ 属性。
    如果有数百万个实例同时活动，这样做能节省大量内存。
    ``` 
    * TODO:如果类中定义了 __slots__ 属性，而且想把实例作为弱引用的目标，那么要把 '__weakref__' 添加到 __slots__ 中。
    
    * 总结：总之，如果使用得当，__slots__ 能显著节省内存，不过有几点要注意。每个子类都要定义 __slots__ 属性，因为解释器会忽略继承的 __slots__ 属性。实例只能拥有 __slots__ 中列出的属性，除非把 '__dict__' 加入 __slots__ 中（这样做就失去了节省内存的功效）。CPython的实现里，__slots__是一个静态数据结构（static），里面存的是value references，比__dict__更快。
    
* 覆盖类属性：Python 有个很独特的特性：类属性可用于为实例属性提供默认值。如果访问一个属性但是实例本身没有这个属性，这是默认获取的是类属性。但是，如果为不存在的实例属性赋值，会新建实例属性，后面再访问会把同名类属性遮盖了。如果想修改类属性的值，必须直接在类上修改，不能通过实例修改。

