## 前言

闭包是基础中的基础，除了在装饰器中有用处之外，闭包还是回调式异步编程和函数式编程风格的基础。

## 初识装饰器

* 装饰器是可调用的对象，其参数是另一个函数（被装饰的函数）。装饰器可能会处理被装饰的函数，然后把它返回，或者将其替换成另一个函数或可调用对象。严格来说，装饰器只是语法糖。装饰器可以像常规的可调用对象那样调用，其参数是另一个函数。

* 装饰器有两大特性： 
    * 能把被装饰的函数替换成其他函数。
    * 装饰器在加载模块时立即执行。
    
* 何时执行装饰器：装饰器的一个关键特性是，它们在被装饰的函数定义之后立即运行。这通常是在导入时即Python 加载模块时。函数装饰器在导入模块时立即执行，而被装饰的函数只在明确调用时运行。

## 变量作用域规则

Python 不要求声明变量，但是假定在函数定义体中赋值的变量是局部变量，
但是如果忘记把变量声明为局部变量（使用 var ），可能会在不知情的情况下获取全局变量。
如果在函数中赋值时想让解释器把 b 当成全局变量，要使用 global 声明。

## 闭包

闭包指延伸了作用域的函数，其中包含函数定义体中引用、但是不在定义体中定义的非全局变量，其关键是它能访问定义体之外定义的非全局变量。

* 完整定义：在计算机科学中，闭包（Closure）是词法闭包（Lexical Closure）的简称，是引用了自由变量的函数。这个被引用的自由变量将和这个函数一同存在，即使已经离开了创造它的环境也不例外。所以，有另一种说法认为闭包是由函数和与其相关的引用环境组合而成的实体。

![avatar](images/1.gif)

```
Note:闭包是一种函数，它会保留定义函数时存在的自由变量的绑定，这样调用函数时，虽然定义作用域不可用了，但是仍能使用那些绑定。
```
